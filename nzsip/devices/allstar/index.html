
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../asterisk/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>AllStarLink - DVNZ Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nzsip-allstarlink-bridges" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="DVNZ Docs" class="md-header__button md-logo" aria-label="DVNZ Docs" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DVNZ Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              AllStarLink
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../.." class="md-tabs__link">
          
  
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  NZSIP

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../dvdmr/" class="md-tabs__link">
          
  
  
    
  
  DMR

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../xlx/" class="md-tabs__link">
          
  
  
    
  
  XLX299

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../resources/" class="md-tabs__link">
          
  
  
    
  
  Resources

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="DVNZ Docs" class="md-nav__button md-logo" aria-label="DVNZ Docs" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    DVNZ Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../connect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connect
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../channels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Channels
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    NZSIP
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            NZSIP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../users/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Device Support
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Device Support
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    AllStarLink
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    AllStarLink
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-a-asl-private-node" class="md-nav__link">
    <span class="md-ellipsis">
      Create a ASL Private Node
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nzsip-iax-friend-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      NZSIP IAX Friend Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dialplan-context" class="md-nav__link">
    <span class="md-ellipsis">
      Dialplan Context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-announcements-optional" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Announcements (optional)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ivr-menu-optional" class="md-nav__link">
    <span class="md-ellipsis">
      IVR Menu (Optional)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../asterisk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Asterisk
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cisco79xx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cisco 79xx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../linphone/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linphone
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../freedmr/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    DMR
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            DMR
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../dvdmr/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Digital Voice
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Digital Voice
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dvdmr/guides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../xlx/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    XLX299
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            XLX299
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../resources/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Resources
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/downloads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/reflectors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reflectors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/voip/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VoIP Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/guides/pistar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pi-Star
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-a-asl-private-node" class="md-nav__link">
    <span class="md-ellipsis">
      Create a ASL Private Node
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nzsip-iax-friend-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      NZSIP IAX Friend Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dialplan-context" class="md-nav__link">
    <span class="md-ellipsis">
      Dialplan Context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-announcements-optional" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Announcements (optional)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ivr-menu-optional" class="md-nav__link">
    <span class="md-ellipsis">
      IVR Menu (Optional)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="nzsip-allstarlink-bridges">NZSIP AllStarLink Bridges</h1>
<p>AllStarLink provides a network of internet connected RF Nodes, Conferences and Bridges.  You can find out more on their <a href="https://allstarlink.org">website</a>.</p>
<p>This guide is designed for those who would like to connect an AllStar node to the NZSIP network via a telephone bridge (with push to talk).</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This document is based on a working setup using ASL3.  The instructions should be backwards compatible with previous versions of ASL.</p>
</div>
<p>Request a new trunk from the <a href="https://helpdesk.nzsip.nz">NZSIP Helpdesk</a>.  Only one trunk is required per AllStar server; extensions will be routed to the trunk for each individual service or IVR menu you wish to provide.</p>
<p>Setting up nodes on your AllStarLink server is beyond the scope of this document.</p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>It is strongly advised that you create a private node to connect to NZSIP and have that node connect to your public allstar node; this not only helps remove telemetry from being broadcast but allows you to easily drop the connection should problems arise.</p>
</div>
<p>Throughout these examples you'll see some numbers:</p>
<ul>
<li>69333 and 69292 are NZSIP extensions routed across the example trunk.</li>
<li>1923 and 1922 are Private Allstar Node numbers on the allstar node with assumed 'on-startup' connections to public allstar nodes.</li>
<li>560023 and 560022 are Public Allstar Node numbers hosted on the same server as the private nodes.</li>
</ul>
<h2 id="create-a-asl-private-node">Create a ASL Private Node</h2>
<p>Follow the ASL menu configuration tool prompts to add a new private node to your server.   You must give private nodes numbers in the range 1900-1999.  </p>
<h2 id="nzsip-iax-friend-configuration">NZSIP IAX Friend Configuration</h2>
<p>Configure your NZSIP IAX friend, this block goes in your <code>/etc/asterisk/custom/iax.conf</code> configuration file; if you do not have a custom directory you may have to create it first.</p>
<div class="highlight"><pre><span></span><code>[nzsip]
type = friend
context = from-nzsip
username = ***TRUNK USERNAME***
auth = md5
secret = ***TRUNK SECRET***
host = ***TRUNK EXCHANGE***
disallow = all                    
allow = ulaw
allow = g726aal2
allow = adpcm
allow = gsm                       
transfer = no
codecpriority=host
insecure=port,invite
requirecalltoken=yes
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Be sure to replace <strong><em>TRUNK USERNAME</em></strong>, <strong><em>TRUNK SECRET</em></strong> and <strong><em>TRUNK EXCHANGE</em></strong> with the details provided to you in your provisioning email.  Do not create your friend block until you have been provided your onboarding details as you may block yourself on our firewall.</p>
</div>
<p>When handing calls off to your trunk NZSIP will use the extension number dialled; you will need a <code>from-nzsip</code> dialplan context to handle these calls and route them to your repeater nodes.</p>
<h2 id="dialplan-context">Dialplan Context</h2>
<p>In your <code>/etc/asterisk/custom/extensions.conf</code> create a <code>from-nzsip</code> dialplan context, this contains the extension mapping from NZSIP to your particualar nodes or services, this is essentially your mapping of numbers to allstar node, repeat the block line for each number.</p>
<div class="highlight"><pre><span></span><code>[from-nzsip]
exten =&gt; 69292,1,Playback(rpt/node)
same =&gt; n,SayAlpha(560022)
same =&gt; n,rpt(1922,P)

exten =&gt; 69333,1,Playback(rpt/node)
same =&gt; n,SayAlpha(560023)
same =&gt; n,rpt(1923,P)
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We require AllStarLink numbers to identify themselves when they answer rather than droppig a user into a bridge with no instructions.  Update the <em>SayAlpha</em> lines in the above block to reflect the public node number that your private node connects to (560022 and 560023 in this example).</p>
</div>
<h2 id="custom-announcements-optional">Custom Announcements  (optional)</h2>
<p>If you'd like to welcome callers to your gateway with a custom greeting and additional instructions; you can add a common block to use for all your extensions and play your announcements based on that node.    This also simplifies your inbound context by routing the calls through a common block.</p>
<p>Add another context named <code>[asl-direct-dial]</code> to your <code>/etc/asterisk/custom/extensions.conf</code> file.</p>
<div class="highlight"><pre><span></span><code>[asl-direct-dial]
exten =&gt; _X.,1,Answer()
same =&gt; n,Set(RPT_NODE=${EXTEN})
same =&gt; n,Playback(custom/welcome)
same =&gt; n,Playback(custom/dialled${EXTEN})
same =&gt; n,Playback(custom/ptt)
same =&gt; n,Playback(beep)
same =&gt; n,rpt(${EXTEN},P)
</code></pre></div>
<p>This example assumes you have uploaded audio files <code>welcome</code>, <code>dialledXXXXX</code> and <code>ptt</code> to the <code>custom</code> sound files in your allstar node.  Each node should have it's own dialledXXXXXX file where the XXXXX is the node number dialled (e.g. 1923).</p>
<p>Update your <code>[from-nzsip]</code> block to call the asl-direct-dial context instead of the repeater function:</p>
<div class="highlight"><pre><span></span><code>exten =&gt; 69292,1,Goto(asl-direct-dial,1922,1)
exten =&gt; 69333,1,Goto(asl-direct-dial,1923,1)
</code></pre></div>
<h2 id="ivr-menu-optional">IVR Menu (Optional)</h2>
<p>If you'd like to create an IVR menu for multiple allstar nodes; here is an example:</p>
<div class="highlight"><pre><span></span><code>[asl-menu]
; menu entry point
exten =&gt; 200,1,Answer()

; uninerruptable greeting
same =&gt; n,Playback(custom/welcome-gateway)

; interruptable menu; multiple items must be concatenated with
; &amp; so that they play as one task to be interrupted correcctly
same =&gt; n(ivrloop),Background(custom/menu-dial-1&amp;custom/menu-dial-2)
same =&gt; n(ivrwait),WaitExten()

; The numbers to dial in the menu mapped to private node
; via the block we created in the above example;  the parameters
; are the private node; the first number before the comma 
; is the menu option dialled.
exten =&gt; 1,1,Goto(asl-direct-dial,1922,1)
exten =&gt; 2,1,Goto(asl-direct-dial,1923,1)

; press * to repeat the menu
exten =&gt; *,1,Goto(asl-menu,200,ivrloop)

; invalid extension handler
exten =&gt; i,1,Playback(custom/whatwasthat)
same =&gt; n,Goto(asl-menu,200,ivrwait)

; timeout handler
exten =&gt; t,1,Playback(custom/whatwasthat)
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The extension number 200 within the menu context is the entrypoint; if you require a menu option 200 please change it to any number unused by your menu but update it accordingly in the inbound context below.</p>
</div>
<p>This example assumes you have audio files <code>welcome-gateway</code>, <code>menu-dial-XX</code>, and <code>whatwasthat</code> in your allstar node's custom asterisk sounds folder. The menu-XX files should be replicated for each menu item read out.  </p>
<p>The menu can be interrupted by dialling the option at any time.</p>
<p>You can then map an extension to your menu in your <code>from-nzsip</code> block:</p>
<div class="highlight"><pre><span></span><code>exten =&gt; 69333,1,Goto(asl-menu,200,1) 
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>